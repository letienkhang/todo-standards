<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Công việc của tôi - Quản lý công việc</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#3B82F6",
                        "background-light": "#F8FAFC",
                        "background-dark": "#0F172A",
                        "card-light": "#FFFFFF",
                        "card-dark": "#1E293B",
                        "border-light": "#E2E8F0",
                        "border-dark": "#334155",
                    },
                    fontFamily: {
                        display: ["Inter", "sans-serif"],
                    },
                },
            },
        };
    </script>
    <style type="text/tailwindcss">
        @layer base {
            body { @apply font-display text-slate-800 dark:text-slate-200 bg-background-light dark:bg-background-dark; }
        }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .dark .custom-scrollbar::-webkit-scrollbar-thumb { background: #475569; }
        .nav-item-active { background-color: rgba(59, 130, 246, 0.1); color: #3B82F6; }
        .dark .nav-item-active { background-color: rgba(59, 130, 246, 0.15); color: #60a5fa; }
        #sidebar-nav { transition: width 0.2s ease-out; }
        #sidebar-nav.nav-collapsed { width: 4rem; min-width: 4rem; }
        #sidebar-nav.nav-collapsed .nav-link-text { opacity: 0; width: 0; overflow: hidden; min-width: 0; padding: 0; }
        .nav-flyout { display: none; }
        #sidebar-nav.nav-collapsed .nav-flyout { display: block; opacity: 0; pointer-events: none; transition: opacity 0.15s ease; }
        #sidebar-nav.nav-collapsed a:hover .nav-flyout, #sidebar-nav.nav-collapsed button:hover .nav-flyout { opacity: 1; }
        #sidebar-nav.nav-collapsed .nav-toggle-icon-expanded { display: none; }
        #sidebar-nav.nav-collapsed .nav-toggle-icon-collapsed { display: inline-block; }
        #sidebar-nav .nav-toggle-icon-collapsed { display: none; }
        .section-label { @apply block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-tight mb-2; }
        .text-slot { @apply min-h-[100px] rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50 flex flex-col items-center justify-center gap-2 p-4; }
        .video-slot { @apply w-full max-w-md aspect-video rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-700 bg-slate-900/80 dark:bg-slate-800/80 flex flex-col items-center justify-center gap-2 overflow-hidden cursor-pointer hover:border-primary/50 hover:bg-slate-800/80 dark:hover:bg-slate-700/50 transition-colors; }
        /* Ảnh tiêu chuẩn / thực tế – desktop (từ ui-mobile) */
        .img-list { @apply flex flex-wrap gap-3; }
        .empty-slot-desk { @apply w-28 h-28 rounded-xl flex-shrink-0 border-2 border-dashed border-slate-300 dark:border-slate-700 flex flex-col items-center justify-center bg-slate-50/50 dark:bg-slate-800/50 hover:border-primary/50 hover:bg-primary/5 dark:hover:bg-primary/10 transition-all cursor-pointer; }
        .empty-slot-desk .material-symbols-outlined { @apply text-slate-400 group-hover:text-primary; }
        .demo-img-slot-desk { @apply w-28 h-28 rounded-xl flex-shrink-0 overflow-hidden border border-slate-200 dark:border-slate-700 bg-slate-100 dark:bg-slate-800 relative; }
        .demo-img-slot-desk img { @apply w-full h-full object-cover; }
        .img-slot-remove-desk { @apply absolute top-1 right-1 w-8 h-8 rounded-full bg-black/60 text-white flex items-center justify-center p-0 border-0 hover:bg-red-500 transition-colors cursor-pointer; }
        .img-slot-remove-desk .material-symbols-outlined { font-size: 18px; }
        /* Highlight lỗi báo cáo – dùng class để không bị Tailwind ghi đè */
        .report-field-error {
            outline: none;
            border-radius: 0.75rem;
            border: 2px solid rgb(239 68 68);
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.25);
        }
        .dark .report-field-error {
            border-color: rgb(248 113 113);
            box-shadow: 0 0 0 2px rgba(248, 113, 113, 0.3);
        }
        #report-desc.report-field-error {
            border: 2px solid rgb(239 68 68);
        }
        .dark #report-desc.report-field-error {
            border-color: rgb(248 113 113);
        }
        /* Nút tiến độ: chưa đủ = trắng/xám, đủ = xanh */
        .task-progress-btn {
            background: #fff;
            border-color: #e2e8f0;
            color: #334155;
        }
        .task-progress-btn:hover { background: #f8fafc; }
        .dark .task-progress-btn {
            background: #1e293b;
            border-color: #475569;
            color: #e2e8f0;
        }
        .dark .task-progress-btn:hover { background: #334155; }
        .task-progress-btn.state-complete {
            background: #3B82F6;
            border-color: #3B82F6;
            color: #fff;
        }
        .task-progress-btn.state-complete:hover { background: #2563eb; }
    </style>
</head>

<body class="transition-colors duration-200 flex min-h-screen overflow-x-hidden bg-background-light dark:bg-background-dark">
    <nav id="sidebar-nav" class="flex flex-col w-64 flex-shrink-0 border-r border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark transition-[width] duration-200 ease-out" aria-label="Menu chính">
        <div class="p-2 flex flex-col gap-0.5 flex-1 min-h-0">
            <a href="index.html" class="nav-link group relative flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                <span class="material-symbols-outlined text-xl shrink-0">dashboard</span>
                <span class="nav-link-text truncate">Tổng quan</span>
                <span class="nav-flyout absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-lg bg-slate-800 dark:bg-slate-700 text-white text-sm shadow-lg z-[100] whitespace-nowrap">Tổng quan</span>
            </a>
            <a href="my-tasks.html" class="nav-item-active nav-link group relative flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors">
                <span class="material-symbols-outlined text-xl shrink-0">folder_shared</span>
                <span class="nav-link-text truncate">Công việc của tôi</span>
                <span class="nav-flyout absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-lg bg-slate-800 dark:bg-slate-700 text-white text-sm shadow-lg z-[100] whitespace-nowrap">Công việc của tôi</span>
            </a>
            <a href="index.html" class="nav-link group relative flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                <span class="material-symbols-outlined text-xl shrink-0">list_alt</span>
                <span class="nav-link-text truncate">Danh sách công việc</span>
                <span class="nav-flyout absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-lg bg-slate-800 dark:bg-slate-700 text-white text-sm shadow-lg z-[100] whitespace-nowrap">Danh sách công việc</span>
            </a>
            <a href="list-person.html" class="nav-link group relative flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                <span class="material-symbols-outlined text-xl shrink-0">person</span>
                <span class="nav-link-text truncate">Danh sách cá nhân</span>
                <span class="nav-flyout absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-lg bg-slate-800 dark:bg-slate-700 text-white text-sm shadow-lg z-[100] whitespace-nowrap">Danh sách cá nhân</span>
            </a>
            <a href="audit-list.html" class="nav-link group relative flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                <span class="material-symbols-outlined text-xl shrink-0">grading</span>
                <span class="nav-link-text truncate">Chấm điểm</span>
                <span class="nav-flyout absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-lg bg-slate-800 dark:bg-slate-700 text-white text-sm shadow-lg z-[100] whitespace-nowrap">Chấm điểm</span>
            </a>
            <a href="#" class="nav-link group relative flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                <span class="material-symbols-outlined text-xl shrink-0">bar_chart</span>
                <span class="nav-link-text truncate">Báo cáo</span>
                <span class="nav-flyout absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-lg bg-slate-800 dark:bg-slate-700 text-white text-sm shadow-lg z-[100] whitespace-nowrap">Báo cáo</span>
            </a>
            <a href="ui-mobile.html" class="nav-link group relative flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                <span class="material-symbols-outlined text-xl shrink-0">phone_android</span>
                <span class="nav-link-text truncate">Giao diện mobile</span>
                <span class="nav-flyout absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-lg bg-slate-800 dark:bg-slate-700 text-white text-sm shadow-lg z-[100] whitespace-nowrap">Giao diện mobile</span>
            </a>
        </div>
        <div class="border-t border-border-light dark:border-border-dark p-2 flex flex-col gap-0.5">
            <button type="button" id="navToggle" class="flex items-center gap-3 px-3 py-2.5 w-full rounded-lg text-sm font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" aria-label="Thu gọn menu">
                <span class="material-symbols-outlined text-xl shrink-0 nav-toggle-icon-expanded">chevron_left</span>
                <span class="material-symbols-outlined text-xl shrink-0 nav-toggle-icon-collapsed">chevron_right</span>
                <span class="nav-link-text truncate">Thu gọn</span>
            </button>
            <button type="button" class="nav-link group relative flex items-center gap-3 px-3 py-2.5 w-full rounded-lg text-sm font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" onclick="document.documentElement.classList.toggle('dark')" aria-label="Giao diện">
                <span class="material-symbols-outlined text-xl shrink-0">dark_mode</span>
                <span class="nav-link-text truncate">Giao diện</span>
                <span class="nav-flyout absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-lg bg-slate-800 dark:bg-slate-700 text-white text-sm shadow-lg z-[100] whitespace-nowrap">Giao diện</span>
            </button>
        </div>
    </nav>
    <script>(function(){var n=document.getElementById('sidebar-nav'),t=document.getElementById('navToggle');if(n&&t){if(localStorage.getItem('navCollapsed')==='1')n.classList.add('nav-collapsed');t.addEventListener('click',function(){n.classList.toggle('nav-collapsed');localStorage.setItem('navCollapsed',n.classList.contains('nav-collapsed')?'1':'0');});}})();</script>
    <div class="flex-1 flex flex-col min-h-0 min-w-0">
        <header
            class="sticky top-0 z-50 bg-card-light dark:bg-card-dark border-b border-border-light dark:border-border-dark px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div>
                    <h1 class="text-sm font-bold text-slate-900 dark:text-white uppercase tracking-tight">Công việc của
                        tôi</h1>
                    <p class="text-[10px] text-slate-400 font-medium uppercase tracking-widest">Quản lý công việc</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <button class="hidden p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full"
                    onclick="document.documentElement.classList.toggle('dark')" aria-hidden="true">
                    <span class="material-symbols-outlined">dark_mode</span>
                </button>
                <button type="button" id="task-progress-btn"
                    class="task-progress-btn px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-semibold transition-all shadow-sm border">
                    <span id="task-progress-icon" class="material-symbols-outlined text-lg">task_alt</span>
                    <span id="task-progress-label" class="flex items-center">
                        <span id="task-progress-counts"><span id="task-filled-count">0</span> / <span id="task-total-count">6</span></span>
                        <span id="task-progress-done" class="hidden">Hoàn tất và gửi thông tin</span>
                    </span>
                </button>
            </div>
        </header>
        <main class="w-full min-w-0 flex-1 min-h-0 p-6 ml-0 flex flex-col">
            <div
                class="bg-card-light dark:bg-card-dark border border-border-light dark:border-border-dark rounded-xl shadow-sm overflow-hidden flex flex-col lg:flex-row flex-1 min-h-0">
                <aside
                    class="w-full lg:w-80 border-r border-border-light dark:border-border-dark flex flex-col bg-slate-50/50 dark:bg-slate-900/20">
                    <div class="p-4 border-b border-border-light dark:border-border-dark bg-white dark:bg-card-dark">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-xs font-bold uppercase tracking-wider text-slate-500">Cấu trúc tiêu chuẩn
                            </h2>
                            <span id="standard-count-badge"
                                class="bg-primary/10 text-primary text-[10px] font-bold px-2 py-0.5 rounded-full">06
                                MỤC</span>
                        </div>
                        <div class="relative">
                            <span
                                class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm">search</span>
                            <input
                                class="w-full pl-9 pr-4 py-2 text-xs bg-slate-100 dark:bg-slate-800 border-none rounded-lg focus:ring-1 focus:ring-primary"
                                placeholder="Tìm kiếm mục..." type="text" />
                        </div>
                    </div>
                    <div class="flex-1 overflow-y-auto custom-scrollbar p-3 space-y-2">
                        <div class="standard-nav-item p-3 rounded-lg bg-primary/5 border border-primary/20 cursor-pointer transition-all group"
                            data-scroll-to="cau-hinh-chung" role="button" tabindex="0">
                            <div class="flex items-center gap-3">
                                <span class="material-symbols-outlined text-primary text-xl">settings</span>
                                <div>
                                    <p class="text-xs font-bold text-primary uppercase">Cấu hình chung</p>
                                    <p class="text-[10px] text-slate-400">Thông tin cơ bản</p>
                                </div>
                            </div>
                        </div>
                        <div class="h-px bg-border-light dark:border-border-dark my-2 mx-2"></div>
                        <div class="standard-nav-item p-3 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 border border-transparent cursor-pointer transition-all"
                            data-scroll-to="tieu-chuan-1" role="button" tabindex="0">
                            <div class="flex items-start gap-3">
                                <span class="text-xs font-bold text-slate-400 mt-1">01</span>
                                <div>
                                    <h3 class="text-xs font-semibold text-slate-700 dark:text-slate-300">Vệ sinh cửa
                                        chính
                                        &amp; Sảnh</h3>
                                    <p class="text-[10px] text-slate-400 mt-0.5 line-clamp-1">Kính cửa, thảm chùi
                                        chân...
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="standard-nav-item p-3 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 border border-transparent cursor-pointer transition-all"
                            data-scroll-to="tieu-chuan-2" role="button" tabindex="0">
                            <div class="flex items-start gap-3">
                                <span class="text-xs font-bold text-slate-400 mt-1">02</span>
                                <div>
                                    <h3 class="text-xs font-semibold text-slate-700 dark:text-slate-300">Kiểm tra trưng
                                        bày
                                        kệ A1</h3>
                                    <p class="text-[10px] text-slate-400 mt-0.5 line-clamp-1">Bảng giá, hạn sử dụng...
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="standard-nav-item p-3 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 border border-transparent cursor-pointer transition-all"
                            data-scroll-to="tieu-chuan-3" role="button" tabindex="0">
                            <div class="flex items-start gap-3">
                                <span class="text-xs font-bold text-slate-400 mt-1">03</span>
                                <div>
                                    <h3 class="text-xs font-semibold text-slate-700 dark:text-slate-300">Vệ sinh khu vực
                                        kho</h3>
                                    <p class="text-[10px] text-slate-400 mt-0.5 line-clamp-1">Sắp xếp, FEFO, vệ sinh
                                        sàn...</p>
                                </div>
                            </div>
                        </div>
                        <div class="standard-nav-item p-3 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 border border-transparent cursor-pointer transition-all"
                            data-scroll-to="tieu-chuan-4" role="button" tabindex="0">
                            <div class="flex items-start gap-3">
                                <span class="text-xs font-bold text-slate-400 mt-1">04</span>
                                <div>
                                    <h3 class="text-xs font-semibold text-slate-700 dark:text-slate-300">Kiểm tra tủ
                                        lạnh
                                        &amp; Tủ đông</h3>
                                    <p class="text-[10px] text-slate-400 mt-0.5 line-clamp-1">Nhiệt độ, lau dọn, hạn
                                        sử dụng...</p>
                                </div>
                            </div>
                        </div>
                        <div class="standard-nav-item p-3 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 border border-transparent cursor-pointer transition-all"
                            data-scroll-to="tieu-chuan-5" role="button" tabindex="0">
                            <div class="flex items-start gap-3">
                                <span class="text-xs font-bold text-slate-400 mt-1">05</span>
                                <div>
                                    <h3 class="text-xs font-semibold text-slate-700 dark:text-slate-300">Vệ sinh khu vực
                                        WC</h3>
                                    <p class="text-[10px] text-slate-400 mt-0.5 line-clamp-1">Nhà vệ sinh, bồn rửa, giấy
                                        vệ sinh...</p>
                                </div>
                            </div>
                        </div>
                        <div class="standard-nav-item p-3 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 border border-transparent cursor-pointer transition-all"
                            data-scroll-to="tieu-chuan-6" role="button" tabindex="0">
                            <div class="flex items-start gap-3">
                                <span class="text-xs font-bold text-slate-400 mt-1">06</span>
                                <div>
                                    <h3 class="text-xs font-semibold text-slate-700 dark:text-slate-300">Kiểm tra an
                                        toàn
                                        PCCC</h3>
                                    <p class="text-[10px] text-slate-400 mt-0.5 line-clamp-1">Bình chữa cháy, lối
                                        thoát hiểm...</p>
                                </div>
                            </div>
                        </div>
                        <button id="add-standard-btn" type="button"
                            class="w-full mt-4 py-2 border border-dashed border-slate-300 dark:border-slate-600 rounded-lg text-slate-400 hover:text-primary hover:border-primary transition-all flex items-center justify-center gap-2 text-[10px] font-bold uppercase">
                            <span class="material-symbols-outlined text-base">add_circle</span>
                            Thêm tiêu chuẩn mới
                        </button>
                    </div>
                </aside>
                <div class="flex-1 overflow-y-auto custom-scrollbar bg-white dark:bg-card-dark">
                    <div id="standard-sections-container" class="p-8 w-full max-w-full space-y-10">
                        <section id="cau-hinh-chung" class="w-full">
                            <div
                                class="flex items-center gap-3 mb-5 border-b border-border-light dark:border-border-dark pb-4">
                                <div
                                    class="w-10 h-10 bg-blue-50 dark:bg-blue-900/30 rounded-xl flex items-center justify-center shrink-0">
                                    <span class="material-symbols-outlined text-primary">tune</span>
                                </div>
                                <div>
                                    <h2
                                        class="text-base font-bold text-slate-900 dark:text-white uppercase tracking-tight">
                                        Cấu hình chung</h2>
                                    <p class="text-xs text-slate-400">Thiết lập thông tin nền tảng cho bộ tiêu chuẩn</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Card 1: Thông tin cơ bản -->
                                <div
                                    class="rounded-xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark p-5 shadow-sm">
                                    <div class="flex items-center gap-2 mb-5">
                                        <span
                                            class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center shrink-0">
                                            <span class="material-symbols-outlined text-primary text-lg">info</span>
                                        </span>
                                        <h3 class="text-sm font-bold text-slate-900 dark:text-white uppercase">Thông tin
                                            cơ
                                            bản</h3>
                                    </div>
                                    <div class="space-y-4">
                                        <div>
                                            <label
                                                class="block text-[10px] font-bold text-slate-500 uppercase mb-1.5 tracking-widest">Tiêu
                                                đề bộ tiêu chuẩn <span class="text-red-500">*</span></label>
                                            <input
                                                class="w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg py-2 px-4 text-sm focus:ring-primary focus:border-primary"
                                                type="text" value="Quy trình vệ sinh định kỳ" />
                                        </div>
                                        <div>
                                            <label
                                                class="block text-[10px] font-bold text-slate-500 uppercase mb-1.5 tracking-widest">Mô
                                                tả</label>
                                            <textarea
                                                class="w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg py-2 px-4 text-sm focus:ring-primary focus:border-primary resize-none min-h-[80px] placeholder:text-slate-400"
                                                placeholder="Nhập mô tả bộ tiêu chuẩn (VD: Quy trình vệ sinh định kỳ áp dụng cho toàn hệ thống cửa hàng...)"
                                                rows="3"></textarea>
                                        </div>
                                        <div>
                                            <label
                                                class="block text-[10px] font-bold text-slate-500 uppercase mb-1.5 tracking-widest">Tag</label>
                                            <div class="flex gap-2">
                                                <div class="relative flex-1 min-w-0">
                                                    <span
                                                        class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm">label</span>
                                                    <input id="config-tag-input" type="text" placeholder="Tag + Enter"
                                                        class="w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg py-2 pl-9 pr-3 text-sm focus:ring-primary focus:border-primary" />
                                                </div>
                                                <button id="config-tag-add" type="button"
                                                    class="shrink-0 px-4 py-2 bg-primary text-white text-sm font-semibold rounded-lg hover:bg-blue-600 transition-colors">Thêm</button>
                                            </div>
                                            <div id="config-tag-list" class="flex flex-wrap gap-1.5 mt-2 min-h-[24px]">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Card 2: Thiết lập triển khai -->
                                <div
                                    class="rounded-xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark p-5 shadow-sm">
                                    <div class="flex items-center gap-2 mb-5">
                                        <span
                                            class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center shrink-0">
                                            <span
                                                class="material-symbols-outlined text-primary text-lg">rocket_launch</span>
                                        </span>
                                        <h3 class="text-sm font-bold text-slate-900 dark:text-white uppercase">Thiết lập
                                            triển khai</h3>
                                    </div>
                                    <div class="space-y-5">
                                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                            <div>
                                                <label
                                                    class="block text-[10px] font-bold text-slate-500 uppercase mb-1.5 tracking-widest">Cửa
                                                    hàng áp dụng <span class="text-red-500">*</span></label>
                                                <div class="relative">
                                                    <span
                                                        class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm">storefront</span>
                                                    <select id="add-store-select"
                                                        class="w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg py-2 pl-9 pr-8 text-sm focus:ring-primary focus:border-primary appearance-none">
                                                        <option value="">Thêm cửa hàng...</option>
                                                        <option value="all">Tất cả cửa hàng</option>
                                                        <option value="store-1">Cửa hàng Q.1 - Trần Hưng Đạo</option>
                                                        <option value="store-2">Cửa hàng Q.3 - Lê Lợi</option>
                                                        <option value="store-3">Cửa hàng Q.7 - Nguyễn Văn Linh</option>
                                                        <option value="store-4">Cửa hàng Q.10 - 3 Tháng 2</option>
                                                        <option value="region-north">Khu vực miền Bắc</option>
                                                        <option value="region-south">Khu vực miền Nam</option>
                                                    </select>
                                                    <span
                                                        class="material-symbols-outlined absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 text-sm pointer-events-none">expand_more</span>
                                                </div>
                                                <div id="store-list" class="flex flex-wrap gap-1.5 mt-1.5 min-h-[22px]">
                                                </div>
                                            </div>
                                            <div>
                                                <label
                                                    class="block text-[10px] font-bold text-slate-500 uppercase mb-1.5 tracking-widest">Bộ
                                                    phận <span class="text-red-500">*</span></label>
                                                <div class="relative">
                                                    <span
                                                        class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm">business</span>
                                                    <select id="add-supervisor-select"
                                                        class="w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg py-2 pl-9 pr-8 text-sm focus:ring-primary focus:border-primary appearance-none">
                                                        <option value="">Chọn bộ phận</option>
                                                        <option value="retail">Nhóm Retail</option>
                                                        <option value="giam-sat-kv">Nhóm Giám sát khu vực</option>
                                                        <option value="kinh-doanh">Nhóm Kinh doanh</option>
                                                        <option value="van-hanh">Nhóm Vận hành cửa hàng</option>
                                                        <option value="marketing">Nhóm Marketing</option>
                                                        <option value="hau-can">Nhóm Hậu cần</option>
                                                        <option value="chat-luong">Nhóm Chất lượng</option>
                                                        <option value="trai-nghiem">Nhóm Trải nghiệm khách hàng</option>
                                                    </select>
                                                    <span
                                                        class="material-symbols-outlined absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 text-sm pointer-events-none">expand_more</span>
                                                </div>
                                                <div id="supervisor-list"
                                                    class="flex flex-wrap gap-1.5 mt-1.5 min-h-[22px]"></div>
                                            </div>
                                        </div>
                                        <div>
                                            <label
                                                class="block text-[10px] font-bold text-slate-500 uppercase mb-1.5 tracking-widest">Thời
                                                hạn thực hiện <span class="text-red-500">*</span></label>
                                            <div class="flex items-center gap-2 flex-wrap">
                                                <div
                                                    class="flex flex-1 min-w-0 gap-1.5 items-center rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 overflow-hidden">
                                                    <div class="relative flex-1 min-w-0">
                                                        <span
                                                            class="material-symbols-outlined absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 text-sm">calendar_today</span>
                                                        <input
                                                            class="w-full bg-transparent border-none py-2 pl-8 pr-2 text-sm focus:ring-0 focus:outline-none"
                                                            type="date" value="2023-10-01" />
                                                    </div>
                                                    <span class="text-slate-300 dark:text-slate-600 text-xs">|</span>
                                                    <div class="relative w-20 shrink-0">
                                                        <span
                                                            class="material-symbols-outlined absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 text-sm">schedule</span>
                                                        <input
                                                            class="w-full bg-transparent border-none py-2 pl-7 pr-1 text-sm focus:ring-0 focus:outline-none"
                                                            type="time" value="08:00" />
                                                    </div>
                                                </div>
                                                <span class="text-slate-400 text-[10px] font-bold shrink-0">đến</span>
                                                <div
                                                    class="flex flex-1 min-w-0 gap-1.5 items-center rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 overflow-hidden">
                                                    <div class="relative flex-1 min-w-0">
                                                        <span
                                                            class="material-symbols-outlined absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 text-sm">calendar_today</span>
                                                        <input
                                                            class="w-full bg-transparent border-none py-2 pl-8 pr-2 text-sm focus:ring-0 focus:outline-none"
                                                            type="date" value="2023-10-31" />
                                                    </div>
                                                    <span class="text-slate-300 dark:text-slate-600 text-xs">|</span>
                                                    <div class="relative w-20 shrink-0">
                                                        <span
                                                            class="material-symbols-outlined absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 text-sm">schedule</span>
                                                        <input
                                                            class="w-full bg-transparent border-none py-2 pl-7 pr-1 text-sm focus:ring-0 focus:outline-none"
                                                            type="time" value="17:00" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="flex items-center gap-2 mb-3">
                                                <span class="material-symbols-outlined text-primary text-lg">loop</span>
                                                <h4
                                                    class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">
                                                    Cấu hình lặp lại</h4>
                                            </div>
                                            <div>
                                                <label
                                                    class="block text-[10px] font-bold text-slate-500 uppercase mb-1.5 tracking-widest">Lặp
                                                    vào các thứ</label>
                                                <div
                                                    class="inline-flex flex-wrap gap-x-4 gap-y-2 items-center p-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/30 w-fit">
                                                        <label class="inline-flex items-center gap-1.5 cursor-pointer">
                                                            <input type="checkbox" name="repeat-day" value="2"
                                                                class="peer rounded border-slate-300 text-primary focus:ring-primary"
                                                                checked>
                                                            <span
                                                                class="text-xs font-medium text-slate-400 peer-checked:text-primary">T2</span>
                                                        </label>
                                                        <label class="inline-flex items-center gap-1.5 cursor-pointer">
                                                            <input type="checkbox" name="repeat-day" value="3"
                                                                class="peer rounded border-slate-300 text-primary focus:ring-primary"
                                                                checked>
                                                            <span
                                                                class="text-xs font-medium text-slate-400 peer-checked:text-primary">T3</span>
                                                        </label>
                                                        <label class="inline-flex items-center gap-1.5 cursor-pointer">
                                                            <input type="checkbox" name="repeat-day" value="4"
                                                                class="peer rounded border-slate-300 text-primary focus:ring-primary"
                                                                checked>
                                                            <span
                                                                class="text-xs font-medium text-slate-400 peer-checked:text-primary">T4</span>
                                                        </label>
                                                        <label class="inline-flex items-center gap-1.5 cursor-pointer">
                                                            <input type="checkbox" name="repeat-day" value="5"
                                                                class="peer rounded border-slate-300 text-primary focus:ring-primary"
                                                                checked>
                                                            <span
                                                                class="text-xs font-medium text-slate-400 peer-checked:text-primary">T5</span>
                                                        </label>
                                                        <label class="inline-flex items-center gap-1.5 cursor-pointer">
                                                            <input type="checkbox" name="repeat-day" value="6"
                                                                class="peer rounded border-slate-300 text-primary focus:ring-primary"
                                                                checked>
                                                            <span
                                                                class="text-xs font-medium text-slate-400 peer-checked:text-primary">T6</span>
                                                        </label>
                                                        <label class="inline-flex items-center gap-1.5 cursor-pointer">
                                                            <input type="checkbox" name="repeat-day" value="7"
                                                                class="peer rounded border-slate-300 text-primary focus:ring-primary">
                                                            <span
                                                                class="text-xs font-medium text-slate-400 peer-checked:text-primary">T7</span>
                                                        </label>
                                                        <label class="inline-flex items-center gap-1.5 cursor-pointer">
                                                            <input type="checkbox" name="repeat-day" value="0"
                                                                class="peer rounded border-slate-300 text-primary focus:ring-primary">
                                                            <span
                                                                class="text-xs font-medium text-slate-400 peer-checked:text-primary">CN</span>
                                                        </label>
                                                    </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <div id="standard-detail-sections" class="max-w-5xl w-full space-y-10">
                            <section id="tieu-chuan-1"
                                class="pt-10 border-t border-slate-100 dark:border-slate-800 scroll-mt-4">
                                <div class="flex items-start justify-between mb-8">
                                    <div class="flex items-center gap-4">
                                        <div
                                            class="h-12 w-12 bg-slate-900 dark:bg-white rounded-xl flex items-center justify-center shadow-lg">
                                            <span class="text-lg font-bold text-white dark:text-slate-900">01</span>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-bold text-slate-900 dark:text-white">Vệ sinh khu vực
                                                cửa
                                                chính &amp; Sảnh</h3>
                                            <p
                                                class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">
                                                Chi
                                                tiết tiêu chuẩn vận hành</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button
                                            class="p-2.5 text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all">
                                            <span class="material-symbols-outlined text-xl">content_copy</span>
                                        </button>
                                        <button
                                            class="p-2.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl transition-all">
                                            <span class="material-symbols-outlined text-xl">delete</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="space-y-8">
                                    <div>
                                        <label
                                            class="flex items-center gap-2 text-[10px] font-bold text-slate-500 uppercase mb-3 tracking-widest">
                                            <span class="material-symbols-outlined text-base">notes</span> Mô tả công
                                            việc
                                        </label>
                                        <textarea
                                            class="w-full bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 rounded-xl p-4 text-sm focus:ring-primary focus:border-primary resize-none min-h-[100px]"
                                            placeholder="Nhập mô tả chi tiết các bước thực hiện...">Đảm bảo kính cửa chính luôn sạch sẽ, không có dấu tay. Thảm chùi chân được đặt ngay ngắn và hút bụi sạch sẽ trước khi mở cửa.</textarea>
                                    </div>
                                    <div class="space-y-6">
                                        <div class="w-full">
                                            <span class="section-label">Ảnh tiêu chuẩn</span>
                                            <div class="img-list">
                                                <div class="demo-img-slot-desk">
                                                    <button type="button" class="img-slot-remove-desk" aria-label="Xóa ảnh"><span class="material-symbols-outlined">close</span></button>
                                                    <img src="https://picsum.photos/280/280?random=1" alt="Mẫu 1" />
                                                </div>
                                                <div class="demo-img-slot-desk">
                                                    <button type="button" class="img-slot-remove-desk" aria-label="Xóa ảnh"><span class="material-symbols-outlined">close</span></button>
                                                    <img src="https://picsum.photos/280/280?random=2" alt="Mẫu 2" />
                                                </div>
                                                <button type="button" class="img-add-btn empty-slot-desk text-primary border-primary/30 bg-primary/5 group" aria-label="Thêm ảnh">
                                                    <span class="material-symbols-outlined text-3xl">add_a_photo</span>
                                                    <span class="text-[10px] font-medium mt-1">Thêm ảnh</span>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="w-full">
                                            <span class="section-label">Ảnh thực tế</span>
                                            <div class="img-list">
                                                <div class="demo-img-slot-desk">
                                                    <button type="button" class="img-slot-remove-desk" aria-label="Xóa ảnh"><span class="material-symbols-outlined">close</span></button>
                                                    <img src="https://picsum.photos/280/280?random=3" alt="Thực tế 1" />
                                                </div>
                                                <button type="button" class="img-add-btn empty-slot-desk text-primary border-primary/30 bg-primary/5 group" aria-label="Thêm ảnh">
                                                    <span class="material-symbols-outlined text-3xl">add_a_photo</span>
                                                    <span class="text-[10px] font-medium mt-1">Thêm ảnh</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="tieu-chuan-2"
                                class="pt-10 border-t border-slate-100 dark:border-slate-800 scroll-mt-4">
                                <div class="flex items-start justify-between mb-8">
                                    <div class="flex items-center gap-4">
                                        <div
                                            class="h-12 w-12 bg-slate-900 dark:bg-white rounded-xl flex items-center justify-center shadow-lg">
                                            <span class="text-lg font-bold text-white dark:text-slate-900">02</span>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-bold text-slate-900 dark:text-white">Kiểm tra trưng
                                                bày
                                                kệ
                                                A1</h3>
                                            <p
                                                class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">
                                                Chi
                                                tiết tiêu chuẩn vận hành</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button
                                            class="p-2.5 text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all"><span
                                                class="material-symbols-outlined text-xl">content_copy</span></button>
                                        <button
                                            class="p-2.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl transition-all"><span
                                                class="material-symbols-outlined text-xl">delete</span></button>
                                    </div>
                                </div>
                                <div class="space-y-8">
                                    <div>
                                        <label
                                            class="flex items-center gap-2 text-[10px] font-bold text-slate-500 uppercase mb-3 tracking-widest"><span
                                                class="material-symbols-outlined text-base">notes</span> Mô tả công
                                            việc</label>
                                        <textarea
                                            class="w-full bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 rounded-xl p-4 text-sm focus:ring-primary focus:border-primary resize-none min-h-[100px]"
                                            placeholder="Nhập mô tả chi tiết...">Kiểm tra bảng giá, hạn sử dụng sản phẩm trên kệ A1. Đảm bảo trưng bày gọn gàng, đúng quy định.</textarea>
                                    </div>
                                    <div class="space-y-6">
                                        <div class="w-full">
                                            <span class="section-label">Ảnh tiêu chuẩn</span>
                                            <div class="img-list">
                                                <div class="demo-img-slot-desk">
                                                    <button type="button" class="img-slot-remove-desk" aria-label="Xóa ảnh"><span class="material-symbols-outlined">close</span></button>
                                                    <img src="https://picsum.photos/280/280?random=4" alt="Mẫu kệ A1" />
                                                </div>
                                                <button type="button" class="img-add-btn empty-slot-desk text-primary border-primary/30 bg-primary/5 group" aria-label="Thêm ảnh">
                                                    <span class="material-symbols-outlined text-3xl">add_a_photo</span>
                                                    <span class="text-[10px] font-medium mt-1">Thêm ảnh</span>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="w-full">
                                            <span class="section-label">Ảnh thực tế</span>
                                            <div class="img-list">
                                                <button type="button" class="img-add-btn empty-slot-desk text-primary border-primary/30 bg-primary/5 group" aria-label="Thêm ảnh">
                                                    <span class="material-symbols-outlined text-3xl">add_a_photo</span>
                                                    <span class="text-[10px] font-medium mt-1">Thêm ảnh</span>
                                                </button>
                                                <div class="demo-img-slot-desk">
                                                    <button type="button" class="img-slot-remove-desk" aria-label="Xóa ảnh"><span class="material-symbols-outlined">close</span></button>
                                                    <img src="https://picsum.photos/280/280?random=5" alt="Thực tế kệ A1" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="tieu-chuan-3"
                                class="pt-10 border-t border-slate-100 dark:border-slate-800 scroll-mt-4">
                                <div class="flex items-start justify-between mb-8">
                                    <div class="flex items-center gap-4">
                                        <div
                                            class="h-12 w-12 bg-slate-900 dark:bg-white rounded-xl flex items-center justify-center shadow-lg">
                                            <span class="text-lg font-bold text-white dark:text-slate-900">03</span>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-bold text-slate-900 dark:text-white">Vệ sinh khu vực
                                                kho
                                            </h3>
                                            <p
                                                class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">
                                                Chi
                                                tiết tiêu chuẩn vận hành</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2"><button
                                            class="p-2.5 text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all"><span
                                                class="material-symbols-outlined text-xl">content_copy</span></button><button
                                            class="p-2.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl transition-all"><span
                                                class="material-symbols-outlined text-xl">delete</span></button></div>
                                </div>
                                <div class="space-y-8">
                                    <div><label
                                            class="flex items-center gap-2 text-[10px] font-bold text-slate-500 uppercase mb-3 tracking-widest"><span
                                                class="material-symbols-outlined text-base">notes</span> Mô tả công
                                            việc</label><textarea
                                            class="w-full bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 rounded-xl p-4 text-sm focus:ring-primary focus:border-primary resize-none min-h-[100px]"
                                            placeholder="Nhập mô tả...">Sắp xếp kho theo FEFO, vệ sinh sàn và kệ, kiểm tra nhiệt độ bảo quản.</textarea>
                                    </div>
                                    <div class="space-y-2">
                                        <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2">Video</label>
                                        <div class="video-slot text-slate-400" role="button" tabindex="0">
                                            <span class="material-symbols-outlined text-4xl">videocam</span>
                                            <span class="text-xs font-medium">Chưa có video — nhấn để tải lên hoặc quay</span>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="tieu-chuan-4"
                                class="pt-10 border-t border-slate-100 dark:border-slate-800 scroll-mt-4">
                                <div class="flex items-start justify-between mb-8">
                                    <div class="flex items-center gap-4">
                                        <div
                                            class="h-12 w-12 bg-slate-900 dark:bg-white rounded-xl flex items-center justify-center shadow-lg">
                                            <span class="text-lg font-bold text-white dark:text-slate-900">04</span>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-bold text-slate-900 dark:text-white">Kiểm tra tủ
                                                lạnh
                                                &amp;
                                                Tủ đông</h3>
                                            <p
                                                class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">
                                                Chi
                                                tiết tiêu chuẩn vận hành</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2"><button
                                            class="p-2.5 text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all"><span
                                                class="material-symbols-outlined text-xl">content_copy</span></button><button
                                            class="p-2.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl transition-all"><span
                                                class="material-symbols-outlined text-xl">delete</span></button></div>
                                </div>
                                <div class="space-y-8">
                                    <div><label
                                            class="flex items-center gap-2 text-[10px] font-bold text-slate-500 uppercase mb-3 tracking-widest"><span
                                                class="material-symbols-outlined text-base">notes</span> Mô tả công
                                            việc</label><textarea
                                            class="w-full bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 rounded-xl p-4 text-sm focus:ring-primary resize-none min-h-[100px]"
                                            placeholder="Nhập mô tả...">Kiểm tra nhiệt độ tủ lạnh/tủ đông, lau dọn, kiểm tra hạn sử dụng sản phẩm bảo quản.</textarea>
                                    </div>
                                    <div class="space-y-2">
                                        <label class="flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase mb-2"><span class="material-symbols-outlined text-base">description</span> Văn bản / Mô tả</label>
                                        <textarea
                                            class="w-full bg-slate-50 dark:bg-slate-800/50 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl p-4 text-sm focus:ring-primary focus:border-primary resize-y min-h-[120px] placeholder:text-slate-400"
                                            placeholder="Nhập nội dung mô tả hoặc ghi chú cho tiêu chí này..."></textarea>
                                    </div>
                                </div>
                            </section>
                            <section id="tieu-chuan-5"
                                class="pt-10 border-t border-slate-100 dark:border-slate-800 scroll-mt-4">
                                <div class="flex items-start justify-between mb-8">
                                    <div class="flex items-center gap-4">
                                        <div
                                            class="h-12 w-12 bg-slate-900 dark:bg-white rounded-xl flex items-center justify-center shadow-lg">
                                            <span class="text-lg font-bold text-white dark:text-slate-900">05</span>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-bold text-slate-900 dark:text-white">Vệ sinh khu vực
                                                WC
                                            </h3>
                                            <p
                                                class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">
                                                Chi
                                                tiết tiêu chuẩn vận hành</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2"><button
                                            class="p-2.5 text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all"><span
                                                class="material-symbols-outlined text-xl">content_copy</span></button><button
                                            class="p-2.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl transition-all"><span
                                                class="material-symbols-outlined text-xl">delete</span></button></div>
                                </div>
                                <div class="space-y-8">
                                    <div><label
                                            class="flex items-center gap-2 text-[10px] font-bold text-slate-500 uppercase mb-3 tracking-widest"><span
                                                class="material-symbols-outlined text-base">notes</span> Mô tả công
                                            việc</label><textarea
                                            class="w-full bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 rounded-xl p-4 text-sm focus:ring-primary resize-none min-h-[100px]"
                                            placeholder="Nhập mô tả...">Vệ sinh nhà vệ sinh, bồn rửa, bổ sung giấy vệ sinh và xà phòng. Đảm bảo khô ráo, thông thoáng.</textarea>
                                    </div>
                                    <div class="space-y-6">
                                        <div class="w-full">
                                            <span class="section-label">Ảnh tiêu chuẩn</span>
                                            <div class="img-list">
                                                <button type="button" class="img-add-btn empty-slot-desk text-primary border-primary/30 bg-primary/5 group" aria-label="Thêm ảnh">
                                                    <span class="material-symbols-outlined text-3xl">add_a_photo</span>
                                                    <span class="text-[10px] font-medium mt-1">Thêm ảnh</span>
                                                </button>
                                                <div class="demo-img-slot-desk">
                                                    <button type="button" class="img-slot-remove-desk" aria-label="Xóa ảnh"><span class="material-symbols-outlined">close</span></button>
                                                    <img src="https://picsum.photos/280/280?random=6" alt="Mẫu WC" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="w-full">
                                            <span class="section-label">Ảnh thực tế</span>
                                            <div class="img-list">
                                                <button type="button" class="img-add-btn empty-slot-desk text-primary border-primary/30 bg-primary/5 group" aria-label="Thêm ảnh">
                                                    <span class="material-symbols-outlined text-3xl">add_a_photo</span>
                                                    <span class="text-[10px] font-medium mt-1">Thêm ảnh</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="tieu-chuan-6"
                                class="pt-10 border-t border-slate-100 dark:border-slate-800 scroll-mt-4">
                                <div class="flex items-start justify-between mb-8">
                                    <div class="flex items-center gap-4">
                                        <div
                                            class="h-12 w-12 bg-slate-900 dark:bg-white rounded-xl flex items-center justify-center shadow-lg">
                                            <span class="text-lg font-bold text-white dark:text-slate-900">06</span>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-bold text-slate-900 dark:text-white">Kiểm tra an
                                                toàn
                                                PCCC
                                            </h3>
                                            <p
                                                class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">
                                                Chi
                                                tiết tiêu chuẩn vận hành</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2"><button
                                            class="p-2.5 text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all"><span
                                                class="material-symbols-outlined text-xl">content_copy</span></button><button
                                            class="p-2.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl transition-all"><span
                                                class="material-symbols-outlined text-xl">delete</span></button></div>
                                </div>
                                <div class="space-y-8">
                                    <div><label
                                            class="flex items-center gap-2 text-[10px] font-bold text-slate-500 uppercase mb-3 tracking-widest"><span
                                                class="material-symbols-outlined text-base">notes</span> Mô tả công
                                            việc</label><textarea
                                            class="w-full bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 rounded-xl p-4 text-sm focus:ring-primary resize-none min-h-[100px]"
                                            placeholder="Nhập mô tả...">Kiểm tra bình chữa cháy còn hạn, lối thoát hiểm thông thoáng, bảng hướng dẫn PCCC đầy đủ.</textarea>
                                    </div>
                                    <div class="space-y-6">
                                        <div class="w-full">
                                            <span class="section-label">Ảnh tiêu chuẩn</span>
                                            <div class="img-list">
                                                <button type="button" class="img-add-btn empty-slot-desk text-primary border-primary/30 bg-primary/5 group" aria-label="Thêm ảnh">
                                                    <span class="material-symbols-outlined text-3xl">add_a_photo</span>
                                                    <span class="text-[10px] font-medium mt-1">Thêm ảnh</span>
                                                </button>
                                                <div class="demo-img-slot-desk">
                                                    <button type="button" class="img-slot-remove-desk" aria-label="Xóa ảnh"><span class="material-symbols-outlined">close</span></button>
                                                    <img src="https://picsum.photos/280/280?random=7" alt="Mẫu PCCC" />
                                                </div>
                                                <div class="demo-img-slot-desk">
                                                    <button type="button" class="img-slot-remove-desk" aria-label="Xóa ảnh"><span class="material-symbols-outlined">close</span></button>
                                                    <img src="https://picsum.photos/280/280?random=8" alt="Mẫu PCCC 2" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="w-full">
                                            <span class="section-label">Ảnh thực tế</span>
                                            <div class="img-list">
                                                <button type="button" class="img-add-btn empty-slot-desk text-primary border-primary/30 bg-primary/5 group" aria-label="Thêm ảnh">
                                                    <span class="material-symbols-outlined text-3xl">add_a_photo</span>
                                                    <span class="text-[10px] font-medium mt-1">Thêm ảnh</span>
                                                </button>
                                                <div class="demo-img-slot-desk">
                                                    <button type="button" class="img-slot-remove-desk" aria-label="Xóa ảnh"><span class="material-symbols-outlined">close</span></button>
                                                    <img src="https://picsum.photos/280/280?random=9" alt="Thực tế PCCC" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="report-block" class="pt-10 border-t border-slate-100 dark:border-slate-800 scroll-mt-4">
                                <div id="report-block-card" class="rounded-xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark p-6 shadow-sm">
                                    <div id="report-block-errors" class="hidden mb-4 p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800/50">
                                        <p class="text-sm font-semibold text-red-700 dark:text-red-300 flex items-center gap-2">
                                            <span class="material-symbols-outlined text-lg">error</span>
                                            <span id="report-block-errors-text"></span>
                                        </p>
                                    </div>
                                    <div class="flex items-center gap-2 mb-5">
                                        <span class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center shrink-0">
                                            <span class="material-symbols-outlined text-primary text-lg">assessment</span>
                                        </span>
                                        <h3 class="text-sm font-bold text-slate-900 dark:text-white uppercase">Báo cáo công việc</h3>
                                    </div>
                                    <div class="flex flex-col gap-6">
                                        <div class="w-full" id="report-track-wrap">
                                            <label class="block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-widest">Tiến độ</label>
                                            <div class="flex gap-3">
                                                <label class="flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl border-2 cursor-pointer transition-colors report-track-option bg-emerald-50 dark:bg-emerald-900/30 border-emerald-500 dark:border-emerald-500 text-emerald-700 dark:text-emerald-300" data-value="on">
                                                    <span class="material-symbols-outlined text-xl">trending_up</span>
                                                    <span class="text-sm font-medium">On track</span>
                                                </label>
                                                <label class="flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl border-2 cursor-pointer transition-colors report-track-option bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-400" data-value="off">
                                                    <span class="material-symbols-outlined text-xl">trending_down</span>
                                                    <span class="text-sm font-medium">Off track</span>
                                                </label>
                                            </div>
                                            <input type="hidden" name="report-track" id="report-track" value="on" />
                                        </div>
                                        <div class="w-full" id="report-desc-wrap">
                                            <label for="report-desc" class="block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-widest">Mô tả / Góp ý</label>
                                            <textarea id="report-desc" name="report-desc" rows="4" placeholder="Nhập mô tả báo cáo hoặc góp ý..." class="w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 text-slate-800 dark:text-slate-200 placeholder-slate-400 text-sm resize-y min-h-[100px] focus:ring-2 focus:ring-primary focus:border-primary"></textarea>
                                        </div>
                                        <div class="w-full">
                                            <label class="block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-widest">Tải file lên</label>
                                            <div class="report-file-zone relative border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-xl p-6 text-center bg-slate-50/50 dark:bg-slate-800/30 transition-colors hover:border-primary/50 hover:bg-primary/5 dark:hover:bg-primary/10" id="report-file-zone">
                                                <input type="file" id="report-file-input" name="report-file" class="absolute opacity-0 w-0 h-0" accept=".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg" multiple />
                                                <label for="report-file-input" class="cursor-pointer flex flex-col items-center gap-2 py-2">
                                                    <span class="material-symbols-outlined text-4xl text-slate-400 dark:text-slate-500">upload_file</span>
                                                    <span class="text-sm text-slate-500 dark:text-slate-400 font-medium">Nhấn để chọn file hoặc kéo thả</span>
                                                    <span class="text-[10px] text-slate-400 dark:text-slate-500">PDF, Word, Excel, ảnh</span>
                                                </label>
                                                <ul class="report-file-list mt-3 text-left text-sm text-slate-600 dark:text-slate-300 space-y-1.5 hidden" id="report-file-list"></ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
        </main>

        <script>
            (function () {
                function updateTaskFilledCount() {
                    var container = document.getElementById('standard-detail-sections');
                    var totalEl = document.getElementById('task-total-count');
                    var filledEl = document.getElementById('task-filled-count');
                    if (!container || !filledEl) return;
                    var sections = container.querySelectorAll('section[id^="tieu-chuan-"]');
                    var total = sections.length;
                    var filled = 0;
                    sections.forEach(function (section) {
                        var hasContent = false;
                        section.querySelectorAll('textarea').forEach(function (ta) {
                            if ((ta.value || '').trim().length > 0) hasContent = true;
                        });
                        if (hasContent) filled++;
                    });
                    filledEl.textContent = filled;
                    if (totalEl) totalEl.textContent = total;
                    document.dispatchEvent(new CustomEvent('task-filled-count-updated'));
                }
                updateTaskFilledCount();
                document.getElementById('standard-detail-sections') && document.getElementById('standard-detail-sections').addEventListener('input', function (e) {
                    if (e.target && e.target.tagName === 'TEXTAREA') updateTaskFilledCount();
                });
            })();
            (function () {
                var btn = document.getElementById('task-progress-btn');
                var reportBlock = document.getElementById('report-block');
                var errorsEl = document.getElementById('report-block-errors');
                var errorsTextEl = document.getElementById('report-block-errors-text');
                var reportTrack = document.getElementById('report-track');
                var reportDesc = document.getElementById('report-desc');
                var trackWrap = document.getElementById('report-track-wrap');
                var countsEl = document.getElementById('task-progress-counts');
                var doneEl = document.getElementById('task-progress-done');
                var iconEl = document.getElementById('task-progress-icon');
                function clearReportErrors() {
                    if (errorsEl) errorsEl.classList.add('hidden');
                    if (trackWrap) trackWrap.classList.remove('report-field-error');
                    if (reportDesc) reportDesc.classList.remove('report-field-error');
                }
                function showReportErrors(messages) {
                    if (errorsTextEl) errorsTextEl.textContent = messages.join(' ');
                    if (errorsEl) errorsEl.classList.remove('hidden');
                    if (messages.some(function (m) { return m.indexOf('Tiến độ') !== -1 || m.indexOf('On track') !== -1; }) && trackWrap) trackWrap.classList.add('report-field-error');
                    if (messages.some(function (m) { return m.indexOf('mô tả') !== -1 || m.indexOf('góp ý') !== -1; }) && reportDesc) {
                        reportDesc.classList.add('report-field-error');
                    }
                }
                function isFormComplete() {
                    var filledEl = document.getElementById('task-filled-count');
                    var totalEl = document.getElementById('task-total-count');
                    var filled = filledEl ? parseInt(filledEl.textContent, 10) : 0;
                    var total = totalEl ? parseInt(totalEl.textContent, 10) : 0;
                    var track = (reportTrack && reportTrack.value) ? reportTrack.value.trim() : '';
                    var desc = reportDesc ? (reportDesc.value || '').trim() : '';
                    return total > 0 && filled >= total && (track === 'on' || track === 'off') && desc.length > 0;
                }
                function updateProgressButtonState() {
                    if (!btn || !countsEl || !doneEl || !iconEl) return;
                    var complete = isFormComplete();
                    if (complete) {
                        btn.classList.add('state-complete');
                        countsEl.classList.add('hidden');
                        doneEl.classList.remove('hidden');
                        iconEl.textContent = 'check_circle';
                    } else {
                        btn.classList.remove('state-complete');
                        countsEl.classList.remove('hidden');
                        doneEl.classList.add('hidden');
                        iconEl.textContent = 'task_alt';
                    }
                }
                updateProgressButtonState();
                document.addEventListener('task-filled-count-updated', updateProgressButtonState);
                if (reportDesc) {
                    reportDesc.addEventListener('input', function () { clearReportErrors(); updateProgressButtonState(); });
                    reportDesc.addEventListener('focus', clearReportErrors);
                }
                document.addEventListener('click', function (e) {
                    if (e.target.closest('.report-track-option')) {
                        setTimeout(function () { clearReportErrors(); updateProgressButtonState(); }, 0);
                    }
                });
                if (btn && reportBlock) {
                    btn.addEventListener('click', function () {
                        clearReportErrors();
                        var track = (reportTrack && reportTrack.value) ? reportTrack.value.trim() : '';
                        var desc = reportDesc ? (reportDesc.value || '').trim() : '';
                        var errors = [];
                        if (track !== 'on' && track !== 'off') {
                            errors.push('Vui lòng chọn tiến độ: On track hoặc Off track.');
                        }
                        if (!desc) {
                            errors.push('Vui lòng nhập mô tả / góp ý báo cáo.');
                        }
                        if (errors.length > 0) {
                            reportBlock.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            showReportErrors(errors);
                            updateProgressButtonState();
                            return;
                        }
                        if (isFormComplete()) {
                            updateProgressButtonState();
                            alert('Đã gửi thông tin.');
                        }
                    });
                }
            })();
            (function () {
                document.addEventListener('click', function (e) {
                    var item = e.target.closest('.standard-nav-item');
                    if (!item) return;
                    var id = item.getAttribute('data-scroll-to');
                    if (!id) return;
                    var target = document.getElementById(id);
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        document.querySelectorAll('.standard-nav-item').forEach(function (el) {
                            el.classList.remove('bg-primary/5', 'border-primary/20');
                            el.classList.add('border', 'border-transparent');
                        });
                        item.classList.add('bg-primary/5', 'border-primary/20');
                        item.classList.remove('border-transparent');
                    }
                });
            })();
            (function () {
                document.addEventListener('click', function (e) {
                    var btn = e.target.closest('.response-type-btn');
                    if (!btn) return;
                    var block = btn.closest('.response-type-block');
                    if (!block) return;
                    var input = block.querySelector('.max-files-input');
                    var isText = btn.getAttribute('data-type') === 'text';
                    if (input) input.disabled = isText;
                    block.querySelectorAll('.response-type-btn').forEach(function (b) {
                        b.classList.remove('bg-primary', 'text-white', 'shadow-sm', 'shadow-primary/20');
                        b.classList.add('bg-slate-100', 'dark:bg-slate-800', 'text-slate-500');
                    });
                    btn.classList.add('bg-primary', 'text-white', 'shadow-sm', 'shadow-primary/20');
                    btn.classList.remove('bg-slate-100', 'dark:bg-slate-800', 'text-slate-500');
                });
            })();
            (function () {
                var select = document.getElementById('add-supervisor-select');
                var list = document.getElementById('supervisor-list');
                if (!select || !list) return;
                var added = [];
                var excludedBySection = {};
                function syncSupervisorsToStandards() {
                    var chips = list.querySelectorAll('.supervisor-chip');
                    var people = [];
                    chips.forEach(function (c) {
                        var value = c.getAttribute('data-value');
                        var label = c.getAttribute('data-label') || c.querySelector('span')?.textContent || '';
                        var parts = label.split(/\s*-\s*/);
                        var name = (parts[0] || '').trim();
                        var role = (parts[1] || '').trim();
                        people.push({ value: value, name: name, role: role });
                    });
                    document.querySelectorAll('.standard-supervisor-cards').forEach(function (el) {
                        var section = el.closest('section[id]');
                        var sectionId = section ? section.id : '';
                        var excluded = excludedBySection[sectionId] || [];
                        var shown = people.filter(function (p) { return excluded.indexOf(p.value) === -1; });
                        var html = shown.map(function (p) {
                            var initial = (p.name.charAt(0) || '—').toUpperCase();
                            var roleLine = p.role ? '<p class="text-[9px] text-slate-500 uppercase">' + escapeHtml(p.role) + '</p>' : '';
                            return '<div class="supervisor-card-in-standard relative flex items-center justify-between bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg p-2 pr-9" data-value="' + escapeHtml(p.value) + '">' +
                                '<button type="button" class="remove-supervisor-from-standard absolute right-1.5 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-400 hover:text-red-500 transition-colors" title="Bỏ khỏi tiêu chuẩn này"><span class="material-symbols-outlined text-base">close</span></button>' +
                                '<div class="flex items-center gap-2">' +
                                '<span class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-xs font-bold text-primary">' + initial + '</span>' +
                                '<div><p class="text-[10px] font-bold text-slate-700 dark:text-slate-300">' + escapeHtml(p.name) + '</p>' + roleLine + '</div>' +
                                '</div>' +
                                '<div class="px-2 py-0.5 bg-white dark:bg-slate-700 rounded text-[9px] font-bold border border-slate-200 dark:border-slate-600">BỘ PHẬN</div>' +
                                '</div>';
                        }).join('');
                        el.innerHTML = html;
                    });
                }
                document.addEventListener('click', function (e) {
                    var btn = e.target.closest('.remove-supervisor-from-standard');
                    if (!btn) return;
                    var card = btn.closest('.supervisor-card-in-standard');
                    var container = card ? card.closest('.standard-supervisor-cards') : null;
                    var section = container ? container.closest('section[id]') : null;
                    if (!card || !section) return;
                    var value = card.getAttribute('data-value');
                    var sectionId = section.id;
                    excludedBySection[sectionId] = excludedBySection[sectionId] || [];
                    if (excludedBySection[sectionId].indexOf(value) === -1) excludedBySection[sectionId].push(value);
                    syncSupervisorsToStandards();
                });
                function escapeHtml(s) {
                    var d = document.createElement('div');
                    d.textContent = s;
                    return d.innerHTML;
                }
                select.addEventListener('change', function () {
                    var value = select.value;
                    var text = select.options[select.selectedIndex].text;
                    if (!value || added.indexOf(value) >= 0) {
                        select.selectedIndex = 0;
                        return;
                    }
                    added.push(value);
                    var chip = document.createElement('span');
                    chip.className = 'supervisor-chip inline-flex items-center gap-1 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-md pl-2 pr-1 py-1 text-[10px] font-medium text-slate-700 dark:text-slate-200 shadow-sm';
                    chip.setAttribute('data-value', value);
                    chip.setAttribute('data-label', text);
                    chip.innerHTML = '<span class="max-w-[140px] truncate">' + escapeHtml(text) + '</span><button type="button" class="remove-supervisor p-0.5 rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 transition-colors shrink-0" title="Bỏ"><span class="material-symbols-outlined text-sm">close</span></button>';
                    list.appendChild(chip);
                    chip.querySelector('.remove-supervisor').addEventListener('click', function () {
                        added = added.filter(function (v) { return v !== value; });
                        chip.remove();
                        syncSupervisorsToStandards();
                    });
                    select.selectedIndex = 0;
                    syncSupervisorsToStandards();
                });
            })();
            (function () {
                var select = document.getElementById('add-store-select');
                var list = document.getElementById('store-list');
                if (!select || !list) return;
                var added = [];
                function escapeHtml(s) {
                    var d = document.createElement('div');
                    d.textContent = s;
                    return d.innerHTML;
                }
                select.addEventListener('change', function () {
                    var value = select.value;
                    var text = select.options[select.selectedIndex].text;
                    if (!value || added.indexOf(value) >= 0) {
                        select.selectedIndex = 0;
                        return;
                    }
                    added.push(value);
                    var chip = document.createElement('span');
                    chip.className = 'store-chip inline-flex items-center gap-1 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-md pl-2 pr-1 py-1 text-[10px] font-medium text-slate-700 dark:text-slate-200 shadow-sm';
                    chip.setAttribute('data-value', value);
                    chip.innerHTML = '<span class="max-w-[140px] truncate">' + escapeHtml(text) + '</span><button type="button" class="remove-store p-0.5 rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 transition-colors shrink-0" title="Bỏ"><span class="material-symbols-outlined text-sm">close</span></button>';
                    list.appendChild(chip);
                    chip.querySelector('.remove-store').addEventListener('click', function () {
                        added = added.filter(function (v) { return v !== value; });
                        chip.remove();
                    });
                    select.selectedIndex = 0;
                });
            })();
            (function () {
                var input = document.getElementById('config-tag-input');
                var addBtn = document.getElementById('config-tag-add');
                var list = document.getElementById('config-tag-list');
                if (!input || !addBtn || !list) return;
                function addTag() {
                    var text = (input.value || '').trim();
                    if (!text) return;
                    input.value = '';
                    var chip = document.createElement('span');
                    chip.className = 'config-tag-chip inline-flex items-center gap-1 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded pl-1.5 pr-1 py-0.5 text-[10px] font-medium text-slate-700 dark:text-slate-200';
                    chip.innerHTML = '<span class="max-w-[120px] truncate">' + text.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</span><button type="button" class="remove-config-tag p-0.5 rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 transition-colors shrink-0" title="Bỏ"><span class="material-symbols-outlined text-sm">close</span></button>';
                    list.appendChild(chip);
                    chip.querySelector('.remove-config-tag').addEventListener('click', function () { chip.remove(); });
                }
                addBtn.addEventListener('click', addTag);
                input.addEventListener('keydown', function (e) { if (e.key === 'Enter') { e.preventDefault(); addTag(); } });
            })();
            (function () {
                var options = document.querySelectorAll('.report-track-option');
                var hidden = document.getElementById('report-track');
                if (!options.length || !hidden) return;
                var onClasses = ['bg-emerald-50', 'dark:bg-emerald-900/30', 'border-emerald-500', 'dark:border-emerald-500', 'text-emerald-700', 'dark:text-emerald-300'];
                var offClasses = ['bg-red-50', 'dark:bg-red-900/20', 'border-red-400', 'dark:border-red-500', 'text-red-600', 'dark:text-red-400'];
                var neutralClasses = ['bg-slate-50', 'dark:bg-slate-800/50', 'border-slate-200', 'dark:border-slate-600', 'text-slate-600', 'dark:text-slate-400'];
                function setOptionStyles() {
                    var all = onClasses.concat(offClasses, neutralClasses);
                    options.forEach(function (o) {
                        all.forEach(function (c) { o.classList.remove(c); });
                        if (o.getAttribute('data-value') === hidden.value) {
                            if (hidden.value === 'on') onClasses.forEach(function (c) { o.classList.add(c); });
                            else offClasses.forEach(function (c) { o.classList.add(c); });
                        } else {
                            neutralClasses.forEach(function (c) { o.classList.add(c); });
                        }
                    });
                }
                options.forEach(function (opt) {
                    opt.addEventListener('click', function () {
                        hidden.value = opt.getAttribute('data-value');
                        setOptionStyles();
                    });
                });
                setOptionStyles();
            })();
            (function () {
                var fileInput = document.getElementById('report-file-input');
                var fileList = document.getElementById('report-file-list');
                var fileZone = document.getElementById('report-file-zone');
                if (fileInput && fileList) {
                    fileInput.addEventListener('change', function () {
                        var files = Array.from(fileInput.files || []);
                        fileList.innerHTML = '';
                        if (files.length) {
                            fileList.classList.remove('hidden');
                            files.forEach(function (f) {
                                var li = document.createElement('li');
                                li.className = 'flex items-center gap-2';
                                li.innerHTML = '<span class="material-symbols-outlined text-[16px] text-slate-500">insert_drive_file</span><span class="truncate flex-1">' + (f.name || 'File') + '</span>';
                                fileList.appendChild(li);
                            });
                        } else {
                            fileList.classList.add('hidden');
                        }
                    });
                }
                if (fileZone && fileInput) {
                    fileZone.addEventListener('dragover', function (e) { e.preventDefault(); fileZone.classList.add('border-primary', 'bg-primary/10'); });
                    fileZone.addEventListener('dragleave', function () { fileZone.classList.remove('border-primary', 'bg-primary/10'); });
                    fileZone.addEventListener('drop', function (e) {
                        e.preventDefault();
                        fileZone.classList.remove('border-primary', 'bg-primary/10');
                        if (e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files.length) {
                            fileInput.files = e.dataTransfer.files;
                            fileInput.dispatchEvent(new Event('change'));
                        }
                    });
                }
            })();
            (function () {
                var imgCounter = 100;
                document.addEventListener('click', function (e) {
                    var addBtn = e.target.closest('.img-add-btn');
                    if (addBtn) {
                        var list = addBtn.closest('.img-list');
                        if (!list) return;
                        imgCounter++;
                        var slot = document.createElement('div');
                        slot.className = 'demo-img-slot-desk';
                        slot.innerHTML = '<button type="button" class="img-slot-remove-desk" aria-label="Xóa ảnh"><span class="material-symbols-outlined">close</span></button><img src="https://picsum.photos/280/280?random=' + imgCounter + '" alt="Ảnh mới" />';
                        if (addBtn.nextSibling) {
                            list.appendChild(slot);
                        } else {
                            list.insertBefore(slot, addBtn);
                        }
                        return;
                    }
                    var removeBtn = e.target.closest('.img-slot-remove-desk');
                    if (removeBtn) {
                        var slot = removeBtn.closest('.demo-img-slot-desk');
                        if (slot) slot.remove();
                    }
                });
            })();
            (function () {
                var btn = document.getElementById('add-standard-btn');
                var container = document.getElementById('standard-sections-container');
                var detailContainer = document.getElementById('standard-detail-sections') || container;
                var badge = document.getElementById('standard-count-badge');
                if (!btn || !container || !badge) return;
                btn.addEventListener('click', function () {
                    var sections = container.querySelectorAll('section[id^="tieu-chuan-"]');
                    var nextNum = sections.length + 1;
                    var nextId = 'tieu-chuan-' + nextNum;
                    var numStr = nextNum < 10 ? '0' + nextNum : String(nextNum);
                    badge.textContent = nextNum + ' MỤC';
                    var sidebarItem = document.createElement('div');
                    sidebarItem.className = 'standard-nav-item p-3 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 border border-transparent cursor-pointer transition-all';
                    sidebarItem.setAttribute('data-scroll-to', nextId);
                    sidebarItem.setAttribute('role', 'button');
                    sidebarItem.setAttribute('tabindex', '0');
                    sidebarItem.innerHTML = '<div class="flex items-start gap-3">' +
                        '<span class="text-xs font-bold text-slate-400 mt-1">' + numStr + '</span>' +
                        '<div><h3 class="text-xs font-semibold text-slate-500 dark:text-slate-400">Tiêu chuẩn mới</h3>' +
                        '<p class="text-[10px] text-slate-400 mt-0.5 line-clamp-1">Nhập tên và mô tả bên cạnh</p></div></div>';
                    btn.parentNode.insertBefore(sidebarItem, btn);
                    var lastSection = document.getElementById('tieu-chuan-6');
                    if (!lastSection) return;
                    var newSection = lastSection.cloneNode(true);
                    newSection.id = nextId;
                    newSection.removeAttribute('data-section-index');
                    var numBadge = newSection.querySelector('div.rounded-xl.shadow-lg span.text-lg');
                    if (numBadge) numBadge.textContent = numStr;
                    var h3 = newSection.querySelector('h3.text-xl');
                    if (h3) {
                        h3.textContent = '';
                        var titleInput = document.createElement('input');
                        titleInput.type = 'text';
                        titleInput.className = 'w-full text-xl font-bold bg-transparent border-none focus:ring-0 p-0 text-slate-900 dark:text-white placeholder:text-slate-400';
                        titleInput.placeholder = 'Nhập tên tiêu chuẩn (VD: Vệ sinh khu vực cửa chính & sảnh)';
                        h3.parentNode.replaceChild(titleInput, h3);
                    }
                    newSection.querySelectorAll('textarea').forEach(function (el) {
                        el.value = '';
                        el.placeholder = 'Nhập mô tả chi tiết các bước thực hiện (VD: Đảm bảo khu vực sạch sẽ, đúng quy định...)';
                        el.classList.add('placeholder:text-slate-400');
                    });
                    newSection.querySelectorAll('input[type="number"]').forEach(function (el) {
                        el.value = '';
                        el.placeholder = 'VD: 3';
                        el.classList.add('placeholder:text-slate-400');
                    });
                    newSection.querySelectorAll('input[type="text"]').forEach(function (el) {
                        var p = (el.placeholder || '').toLowerCase();
                        if (p.indexOf('thêm') === -1) el.placeholder = 'Nhập nội dung';
                        if (el.closest('[class*="min-h-[40px]"]')) el.placeholder = 'Thêm khu vực loại trừ (VD: Q. Tân Bình)...';
                        el.value = '';
                        el.classList.add('placeholder:text-slate-400');
                    });
                    newSection.querySelectorAll('input:not([type])').forEach(function (el) {
                        el.value = '';
                        if (!el.placeholder) el.placeholder = 'Thêm...';
                        el.classList.add('placeholder:text-slate-400');
                    });
                    newSection.querySelectorAll('.standard-supervisor-cards').forEach(function (el) { el.innerHTML = ''; });
                    detailContainer.appendChild(newSection);
                    var target = document.getElementById(nextId);
                    if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
            })();
        </script>
    </div>
</body>

</html>